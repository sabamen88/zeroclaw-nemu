# ZeroClaw Config — Nemu Seller Agent
# Generated by Nemu provisioner for seller: {{SELLER_ID}}
# DO NOT edit manually — use the Nemu dashboard or provisioner

# ─── AI Model ────────────────────────────────────────────────────────────────
# MiniMax M2.5: cheap, fast, strong Bahasa Indonesia
api_key = "{{MINIMAX_API_KEY}}"
default_provider = "custom:https://api.minimax.chat/v1"
default_model = "MiniMax-Text-01"
default_temperature = 0.7

# Fallback: OpenRouter (if MiniMax is down)
# default_provider = "openrouter"
# default_model = "minimax/minimax-01"

# ─── Memory ──────────────────────────────────────────────────────────────────
# PostgreSQL backend — Neon, one schema per seller
[memory]
backend = "postgres"
auto_save = true
embedding_provider = "custom:https://api.minimax.chat/v1/embeddings"

[storage.provider.config]
provider = "postgres"
db_url = "{{NEON_DATABASE_URL}}"
schema = "seller_{{SELLER_ID}}"
table = "memories"
connect_timeout_secs = 15

# ─── Gateway (Webhook API for Dashboard) ─────────────────────────────────────
[gateway]
port = {{GATEWAY_PORT}}
host = "127.0.0.1"
require_pairing = true
allow_public_bind = false

# ─── Channels ────────────────────────────────────────────────────────────────

# WhatsApp Business Cloud API (Meta)
[channels_config.whatsapp]
access_token = "{{WA_ACCESS_TOKEN}}"
phone_number_id = "{{WA_PHONE_NUMBER_ID}}"
verify_token = "{{WA_VERIFY_TOKEN}}"
# Allow seller's own number + all buyers
allowed_numbers = ["{{SELLER_PHONE}}", "*"]

# Telegram (optional — for seller management)
# [channels_config.telegram]
# token = "{{TELEGRAM_BOT_TOKEN}}"
# allowed_users = ["{{SELLER_TELEGRAM_ID}}"]

# ─── Autonomy ─────────────────────────────────────────────────────────────────
[autonomy]
level = "supervised"       # agen butuh izin untuk aksi destruktif
workspace_only = true
allowed_commands = ["curl"]  # hanya HTTP calls ke Nemu API

# ─── Heartbeat ────────────────────────────────────────────────────────────────
[heartbeat]
enabled = true
interval_minutes = 30      # cek setiap 30 menit

# ─── Tunnel (untuk WhatsApp webhook) ──────────────────────────────────────────
[tunnel]
provider = "cloudflare"    # cloudflare tunnel, free tier

# ─── Security ─────────────────────────────────────────────────────────────────
[secrets]
encrypt = true

[runtime]
kind = "native"

# ─── Identity (Nemu SOUL.md format) ───────────────────────────────────────────
[identity]
format = "openclaw"        # gunakan SOUL.md + AGENTS.md dari workspace

# ─── Seller-Specific Skills ────────────────────────────────────────────────────
# Skills aktif untuk seller ini
# (semua skills sudah tersedia, ini hanya toggle)
[skills]
enabled = ["nemu-catalog", "nemu-orders", "nemu-buyers", "paysponge"]

[skills.nemu-catalog]
seller_id = "{{SELLER_ID}}"
agent_api_key = "{{NEMU_AGENT_API_KEY}}"
agent_can_update_stock = {{AGENT_CAN_UPDATE_STOCK}}

[skills.nemu-orders]
seller_id = "{{SELLER_ID}}"
agent_api_key = "{{NEMU_AGENT_API_KEY}}"
notify_on_new_order = true
notify_threshold_idr = 500000

[skills.paysponge]
api_key = "{{PAYSPONGE_API_KEY}}"
agent_id = "{{PAYSPONGE_AGENT_ID}}"
wallet_address = "{{WALLET_ADDRESS}}"
network = "base"
max_transfer_per_tx_usdc = 50
max_transfer_per_day_usdc = 200
